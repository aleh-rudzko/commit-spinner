<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spinner</title>
    <link rel="stylesheet" href="/static/styles.css">
    <script
            src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>
</head>
<body>
<script src="/static/propeller.js"></script>
<script>
    var data = {"unsav": 0.5, "Yauheni Kartavykh": 0.3125, "Vladimir Rubin": 0.1875};
    $(document).ready(function () {
        var spinners = [];
        var spinnerList = [];
        var gavno = {};
//        $.get('https://wth3-spinner.herokuapp.com/calculate', function ( data ) {
//            console.log(data);
        Object.keys(data).forEach(function (username) {
            gavno[`spinner-${username}`] =
            spinners.push(username);
            $('body').append('<img id="spinner-' + username + '" class="spinner" src="/static/spinner.png" style="transform: rotate(0deg) translateZ(0px);">')
        });
//        });

        console.log(spinners);
//        console.log(spinners.map(spinnerUsername => document.getElementById((`spinner-${spinnerUsername}`))));
        spinners.forEach(function( username ) {
            spinnerList.push(
                new Propeller(document.getElementById(`spinner-${username}`), {
                    inertia: 1,
                    speed: 1000 * data[username],
                    onRotate: function() {
                    }
                })
            )
        })
//        const spinnerList = new Propeller(spinners.map(spinnerUsername => document.getElementById((`spinner-${spinnerUsername}`))), {
//            inertia: 1,
//            speed: 1000,
//            onRotate: () => console.log(this.speed)
//    })
//        ;
//        var spinnerElement = document.getElementById('spinner');
//        var spinner = new Propeller(spinnerElement, {
//            inertia: 1,
//            speed: 1000,
//            onRotate: function () {
//                console.log(this.speed);
//            }
//        });
//        setTimeout(function () {
//            spinner.setSpeed(500);
//        }, 3000);
    });
</script>

</body>
</html>